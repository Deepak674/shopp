/*!
 * shopp.js - Shopp behavioral utility library
 * Copyright Â© 2008-2010 by Ingenesis Limited
 * Licensed under the GPLv3 {@see license.txt}
 */
;function jqnc(){return jQuery.noConflict()}function copyOf(a){var c,b=new Object;for(c in a)b[c]=a[c];return b}function getCurrencyFormat(a){if(a&&a.currency)return a;var b={cpos:!0,currency:"$",precision:2,decimals:".",thousands:",",grouping:[3]},c={cp:"cpos",c:"currency",p:"precision",d:"decimals",t:"thousands",g:"grouping"},d=b;return jQuery.each(c,function(a,b){void 0!==$s[a]&&("p"==a?d[b]=parseInt($s[a],10):"cp"==a?d[b]=Boolean($s[a]):"g"==a?d[b]=$s[a].split(","):d[b]=$s[a])}),d}function asMoney(a,b){return b=getCurrencyFormat(b),a=formatNumber(a,b),b.cpos?b.currency+a:a+b.currency}function asPercent(a,b,c,d){return b=getCurrencyFormat(b),b.precision=c?c:1,formatNumber(a,b,d).replace(/0+$/,"").replace(new RegExp("\\"+b.decimals+"$"),"")+"%"}function formatNumber(a,b,c){b=getCurrencyFormat(b),a=asNumber(a);var e,f=fraction=0,g=!1,h="",i=[],j=a.toFixed(b.precision).toString().split("."),k=b.grouping?b.grouping:[3];for(a="",f=j[0],j[1]&&(fraction=j[1]),k=k.indexOf(",")>-1?k.split(","):[k],e=0,lg=k.length-1;f.length>k[Math.min(e,lg)]&&""!=k[Math.min(e,lg)];)g=f.length-k[Math.min(e++,lg)],h=f,f=h.substr(0,g),i.unshift(h.substr(g));return f&&i.unshift(f),a=i.join(b.thousands),""==a&&(a=0),fraction=c?new Number("0."+fraction).toString().substr(2,b.precision):fraction,fraction=!c||c&&fraction.length>0?b.decimals+fraction:"",b.precision>0&&(a+=fraction),a}function asNumber(a,b){return a?(b=getCurrencyFormat(b),a instanceof Number?new Number(a.toFixed(b.precision)):"number"==typeof a?new Number(a.toFixed(b.precision)):(a=a.toString().replace(b.currency,""),a=a.toString().replace(new RegExp(/(\D\.|[^\d\,\.\-])/g),""),a=a.toString().replace(new RegExp("\\"+b.thousands,"g"),""),b.precision>0&&(a=a.toString().replace(new RegExp("\\"+b.decimals,"g"),".")),isNaN(new Number(a))&&(a=a.replace(new RegExp(/\./g),"").replace(new RegExp(/\,/),".")),new Number(a))):0}function CallbackRegistry(){this.callbacks=new Array,this.register=function(a,b){this.callbacks[a]=b},this.call=function(a,b,c,d){this.callbacks[a](b,c,d)},this.get=function(a){return this.callbacks[a]}}function quickSelects(a){var b=0==jQuery(a).size()?document:a;jQuery(b).on("mouseup.select","input.selectall",function(){this.select()})}function moneyInputs(a){0==jQuery(a).size()?document:a;jQuery(document).on("change","input.money",function(){this.value=asMoney(this.value)})}function htmlentities(a){return a?a=a.replace(new RegExp(/&#(\d+);/g),function(){return String.fromCharCode(RegExp.$1)}):""}jQuery.ua={chrome:!1,mozilla:!1,opera:!1,msie:!1,safari:!1},jQuery.each(jQuery.ua,function(a,b){var c=navigator.userAgent;jQuery.ua[a]=new RegExp(a,"i").test(c)?!0:!1,jQuery.ua.mozilla&&"mozilla"==a&&(jQuery.ua.mozilla=new RegExp("firefox","i").test(c)?!0:!1),jQuery.ua.chrome&&"safari"==a&&(jQuery.ua.safari=!1)}),Array.indexOf||(Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]==a)return b;return-1}),Number.prototype.roundFixed||(Number.prototype.roundFixed=function(a){var b=Math.pow(10,a||0);return String(Math.round(this*b)/b)}),jQuery.fn.fadeRemove=function(a,b){var c=jQuery(this);return c.fadeOut(a,function(){c.remove(),b&&b()}),this},jQuery.fn.hoverClass=function(){var a=jQuery(this);return a.hover(function(){a.addClass("hover")},function(){a.removeClass("hover")}),this},jQuery.fn.clickSubmit=function(){var a=jQuery(this);return a.click(function(){jQuery(this).closest("form").submit()}),this},jQuery.fn.setDisabled=function(a){var b=jQuery(this);return b.each(function(){a?b.attr("disabled",!0).addClass("disabled"):b.attr("disabled",!1).removeClass("disabled")}),this},jQuery.parseJSON=function(data){if("undefined"==typeof JSON||"function"!=typeof JSON.parse)return eval("("+data+")");try{return JSON.parse(data)}catch(e){return!1}},jQuery.getQueryVar=function(a,b){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+a+"=([^&#]*)"),d=c.exec(b);return null==d?"":decodeURIComponent(d[1].replace(/\+/g," "))},jQuery(document).ready(function(a){a("input.currency, input.money").change(function(){this.value=asMoney(this.value)}).change(),a(".click-submit").clickSubmit(),quickSelects()});