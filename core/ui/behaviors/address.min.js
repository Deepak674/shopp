!function(e){jQuery.fn.upstate=function(){if("undefined"!=typeof regions)return e(this).change(function(i,t){var a=e(this),s=a.attr("id").split("-")[0],n=a.val(),r=a.parents().find("#"+s+"-state"),l=a.parents().find("#"+s+"-state-menu"),d='<option value=""></option>';return 0==l.length||(l.hasClass("hidden")&&l.removeClass("hidden").hide(),void(regions[n]||t&&l.find("option").length>1?(r.setDisabled(!0).addClass("_important").hide(),regions[n]?(e.each(regions[n],function(e,i){d+='<option value="'+e+'">'+i+"</option>"}),t||l.empty().append(d).setDisabled(!1).show().focus(),l.hasClass("auto-required")&&l.addClass("required")):l.hasClass("auto-required")&&l.removeClass("required"),l.setDisabled(!1).show(),e("label[for="+r.attr("id")+"]").attr("for",l.attr("id"))):(l.empty().setDisabled(!0).hide(),r.setDisabled(!1).show().removeClass("_important"),e("label[for="+l.attr("id")+"]").attr("for",r.attr("id")),t||r.val("").focus())))}).trigger("change",[!0]),e(this)}}(jQuery),jQuery(document).ready(function(e){var i=e(".sameaddress"),t=e("#shipping-address-fields"),a=e("#billing-address-fields");e("#firstname,#lastname").change(function(){var i="firstname"==e(this).attr("id")?"lastname":"firstname";e("#"+i).val().trim()&&e(this).val().trim()&&e("#billing-name,#shipping-name").filter(function(){return""===this.value}).val(new String(e("#firstname").val()+" "+e("#lastname").val()).trim())}),e("#billing-country,#shipping-country").upstate(),i.change(function(s,n){var r=!1,l=e("#billing-country"),d=e("#shipping-country"),o="billing"==i.val()?t:a,u="shipping"==i.val()?t:a;i.is(":checked")?(o.removeClass("half"),u.hide().find(".required").setDisabled(!0)):(o.addClass("half"),u.show().find(".disabled:not(._important)").setDisabled(!1),n||(r=!0)),l.is(":visible")&&l.trigger("change.localemenu",[n]),d.is(":visible")&&d.trigger("change.localemenu",[n]),r&&u.find("input:first").focus()}).trigger("change",[!0]).click(function(){e(this).change()})});